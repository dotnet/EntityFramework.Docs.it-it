---
title: Aggiornamento a Entity Framework 6-EF6
description: Aggiornamento a Entity Framework 6
author: ajcvickers
ms.date: 10/23/2016
uid: ef6/what-is-new/upgrading-to-ef6
ms.openlocfilehash: 14cd0e259832377332f77a199502699d75982bb4
ms.sourcegitcommit: 0a25c03fa65ae6e0e0e3f66bac48d59eceb96a5a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/14/2020
ms.locfileid: "92064250"
---
# <a name="upgrading-to-entity-framework-6"></a><span data-ttu-id="7a675-103">Aggiornamento a Entity Framework 6</span><span class="sxs-lookup"><span data-stu-id="7a675-103">Upgrading to Entity Framework 6</span></span>

<span data-ttu-id="7a675-104">Nelle versioni precedenti di EF il codice è stato suddiviso tra le librerie principali (principalmente System.Data.Entity.dll) fornite come parte delle librerie .NET Framework e fuori banda (OOB) (principalmente EntityFramework.dll) fornite in un pacchetto NuGet.</span><span class="sxs-lookup"><span data-stu-id="7a675-104">In previous versions of EF the code was split between core libraries (primarily System.Data.Entity.dll) shipped as part of the .NET Framework and out-of-band (OOB) libraries (primarily EntityFramework.dll) shipped in a NuGet package.</span></span> <span data-ttu-id="7a675-105">EF6 acquisisce il codice dalle librerie principali e le incorpora nelle librerie di OOB.</span><span class="sxs-lookup"><span data-stu-id="7a675-105">EF6 takes the code from the core libraries and incorporates it into the OOB libraries.</span></span> <span data-ttu-id="7a675-106">Questa operazione era necessaria per consentire a EF di essere creata in modo open source e per potersi sviluppare a ritmi diversi da .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="7a675-106">This was necessary in order to allow EF to be made open source and for it to be able to evolve at a different pace from .NET Framework.</span></span> <span data-ttu-id="7a675-107">La conseguenza è che le applicazioni dovranno essere ricompilate in base ai tipi spostati.</span><span class="sxs-lookup"><span data-stu-id="7a675-107">The consequence of this is that applications will need to be rebuilt against the moved types.</span></span>

<span data-ttu-id="7a675-108">Questo dovrebbe essere semplice per le applicazioni che usano DbContext come fornito in EF 4,1 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="7a675-108">This should be straightforward for applications that make use of DbContext as shipped in EF 4.1 and later.</span></span> <span data-ttu-id="7a675-109">Per le applicazioni che usano ObjectContext è necessario un po' di lavoro, ma non è ancora difficile.</span><span class="sxs-lookup"><span data-stu-id="7a675-109">A little more work is required for applications that make use of ObjectContext but it still isn’t hard to do.</span></span>

<span data-ttu-id="7a675-110">Di seguito è riportato un elenco di controllo delle operazioni che è necessario eseguire per aggiornare un'applicazione esistente a EF6.</span><span class="sxs-lookup"><span data-stu-id="7a675-110">Here is a checklist of the things you need to do to upgrade an existing application to EF6.</span></span>

## <a name="1-install-the-ef6-nuget-package"></a><span data-ttu-id="7a675-111">1. installare il pacchetto NuGet EF6</span><span class="sxs-lookup"><span data-stu-id="7a675-111">1. Install the EF6 NuGet package</span></span>

<span data-ttu-id="7a675-112">È necessario eseguire l'aggiornamento al nuovo runtime di Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="7a675-112">You need to upgrade to the new Entity Framework 6 runtime.</span></span>

1. <span data-ttu-id="7a675-113">Fare clic con il pulsante destro del mouse sul progetto e scegliere **Gestisci pacchetti NuGet...**</span><span class="sxs-lookup"><span data-stu-id="7a675-113">Right-click on your project and select **Manage NuGet Packages...**</span></span>  
2. <span data-ttu-id="7a675-114">Nella scheda **online** selezionare **EntityFramework** e fare clic su **Installa** .</span><span class="sxs-lookup"><span data-stu-id="7a675-114">Under the **Online** tab select **EntityFramework** and click **Install**</span></span>  
   > [!NOTE]
   > <span data-ttu-id="7a675-115">Se è stata installata una versione precedente del pacchetto NuGet EntityFramework, questo verrà aggiornato a EF6.</span><span class="sxs-lookup"><span data-stu-id="7a675-115">If a previous version of the EntityFramework NuGet package was installed this will upgrade it to EF6.</span></span>

<span data-ttu-id="7a675-116">In alternativa, è possibile eseguire il comando seguente dalla console di gestione pacchetti:</span><span class="sxs-lookup"><span data-stu-id="7a675-116">Alternatively, you can run the following command from Package Manager Console:</span></span>

``` powershell
Install-Package EntityFramework
```

## <a name="2-ensure-that-assembly-references-to-systemdataentitydll-are-removed"></a><span data-ttu-id="7a675-117">2. Assicurarsi che i riferimenti ad assembly System.Data.Entity.dll vengano rimossi</span><span class="sxs-lookup"><span data-stu-id="7a675-117">2. Ensure that assembly references to System.Data.Entity.dll are removed</span></span>

<span data-ttu-id="7a675-118">L'installazione del pacchetto NuGet EF6 dovrebbe rimuovere automaticamente dal progetto tutti i riferimenti a System. Data. Entity.</span><span class="sxs-lookup"><span data-stu-id="7a675-118">Installing the EF6 NuGet package should automatically remove any references to System.Data.Entity from your project for you.</span></span>

## <a name="3-swap-any-ef-designer-edmx-models-to-use-ef-6x-code-generation"></a><span data-ttu-id="7a675-119">3. scambiare i modelli di progettazione EF (EDMX) per usare la generazione di codice EF 6. x</span><span class="sxs-lookup"><span data-stu-id="7a675-119">3. Swap any EF Designer (EDMX) models to use EF 6.x code generation</span></span>

<span data-ttu-id="7a675-120">Se sono presenti modelli creati con la finestra di progettazione di EF, sarà necessario aggiornare i modelli di generazione del codice per generare codice compatibile con EF6.</span><span class="sxs-lookup"><span data-stu-id="7a675-120">If you have any models created with the EF Designer, you will need to update the code generation templates to generate EF6 compatible code.</span></span>

> [!NOTE]
> <span data-ttu-id="7a675-121">Attualmente sono disponibili solo i modelli di Generatore DbContext di EF 6. x per Visual Studio 2012 e 2013.</span><span class="sxs-lookup"><span data-stu-id="7a675-121">There are currently only EF 6.x DbContext Generator templates available for Visual Studio 2012 and 2013.</span></span>

1. <span data-ttu-id="7a675-122">Elimina i modelli di generazione del codice esistenti.</span><span class="sxs-lookup"><span data-stu-id="7a675-122">Delete existing code-generation templates.</span></span> <span data-ttu-id="7a675-123">Questi file saranno in genere denominati \*\* \<edmx_file_name\> . TT\*\* e \*\* \<edmx_file_name\> . Context.tt\*\* ed essere annidati nel file edmx in Esplora soluzioni.</span><span class="sxs-lookup"><span data-stu-id="7a675-123">These files will typically be named **\<edmx_file_name\>.tt** and **\<edmx_file_name\>.Context.tt** and be nested under your edmx file in Solution Explorer.</span></span> <span data-ttu-id="7a675-124">È possibile selezionare i modelli in Esplora soluzioni e premere il tasto **Canc** per eliminarli.</span><span class="sxs-lookup"><span data-stu-id="7a675-124">You can select the templates in Solution Explorer and press the **Del** key to delete them.</span></span>  
   > [!NOTE]
   > <span data-ttu-id="7a675-125">Nei progetti di siti Web i modelli non verranno annidati nel file edmx, ma elencati insieme in Esplora soluzioni.</span><span class="sxs-lookup"><span data-stu-id="7a675-125">In Web Site projects the templates will not be nested under your edmx file, but listed alongside it in Solution Explorer.</span></span>  

   > [!NOTE]
   > <span data-ttu-id="7a675-126">Nei progetti VB.NET è necessario abilitare ' Mostra tutti i file ' per poter visualizzare i file del modello annidato.</span><span class="sxs-lookup"><span data-stu-id="7a675-126">In VB.NET projects you will need to enable 'Show All Files' to be able to see the nested template files.</span></span>
2. <span data-ttu-id="7a675-127">Aggiungere il modello di generazione del codice EF 6. x appropriato.</span><span class="sxs-lookup"><span data-stu-id="7a675-127">Add the appropriate EF 6.x code generation template.</span></span> <span data-ttu-id="7a675-128">Aprire il modello nella finestra di progettazione EF, fare clic con il pulsante destro del mouse nell'area di progettazione e scegliere **Aggiungi elemento di generazione codice...**</span><span class="sxs-lookup"><span data-stu-id="7a675-128">Open your model in the EF Designer, right-click on the design surface and select **Add Code Generation Item...**</span></span>
    - <span data-ttu-id="7a675-129">Se si usa l'API DbContext (scelta consigliata), il **Generatore EF 6. x DbContext** sarà disponibile nella scheda **dati** .</span><span class="sxs-lookup"><span data-stu-id="7a675-129">If you are using the DbContext API (recommended) then **EF 6.x DbContext Generator** will be available under the **Data** tab.</span></span>  
      > [!NOTE]
      > <span data-ttu-id="7a675-130">Se si usa Visual Studio 2012, sarà necessario installare gli strumenti di EF 6 per avere questo modello.</span><span class="sxs-lookup"><span data-stu-id="7a675-130">If you are using Visual Studio 2012, you will need to install the EF 6 Tools to have this template.</span></span> <span data-ttu-id="7a675-131">Per informazioni dettagliate, vedere [Get Entity Framework](xref:ef6/fundamentals/install) .</span><span class="sxs-lookup"><span data-stu-id="7a675-131">See [Get Entity Framework](xref:ef6/fundamentals/install) for details.</span></span>  

    - <span data-ttu-id="7a675-132">Se si usa l'API ObjectContext, sarà necessario selezionare la scheda **online** e cercare **Ef 6. x EntityObject Generator**.</span><span class="sxs-lookup"><span data-stu-id="7a675-132">If you are using the ObjectContext API then you will need to select the **Online** tab and search for **EF 6.x EntityObject Generator**.</span></span>  
3. <span data-ttu-id="7a675-133">Se è stata applicata una personalizzazione ai modelli di generazione del codice, sarà necessario applicarli nuovamente ai modelli aggiornati.</span><span class="sxs-lookup"><span data-stu-id="7a675-133">If you applied any customizations to the code generation templates you will need to re-apply them to the updated templates.</span></span>

## <a name="4-update-namespaces-for-any-core-ef-types-being-used"></a><span data-ttu-id="7a675-134">4. aggiornare gli spazi dei nomi per tutti i tipi EF principali usati</span><span class="sxs-lookup"><span data-stu-id="7a675-134">4. Update namespaces for any core EF types being used</span></span>

<span data-ttu-id="7a675-135">Gli spazi dei nomi per i tipi DbContext e Code First non sono stati modificati.</span><span class="sxs-lookup"><span data-stu-id="7a675-135">The namespaces for DbContext and Code First types have not changed.</span></span> <span data-ttu-id="7a675-136">Ciò significa che per molte applicazioni che utilizzano EF 4,1 o versioni successive non è necessario modificare alcun elemento.</span><span class="sxs-lookup"><span data-stu-id="7a675-136">This means for many applications that use EF 4.1 or later you will not need to change anything.</span></span>

<span data-ttu-id="7a675-137">I tipi come ObjectContext precedentemente in System.Data.Entity.dll sono stati spostati in nuovi spazi dei nomi.</span><span class="sxs-lookup"><span data-stu-id="7a675-137">Types like ObjectContext that were previously in System.Data.Entity.dll have been moved to new namespaces.</span></span> <span data-ttu-id="7a675-138">Ciò significa che potrebbe essere necessario aggiornare le direttive *using* o *Import* per la compilazione con EF6.</span><span class="sxs-lookup"><span data-stu-id="7a675-138">This means you may need to update your *using* or *Import* directives to build against EF6.</span></span>

<span data-ttu-id="7a675-139">La regola generale per le modifiche dello spazio dei nomi è che qualsiasi tipo in System. Data. \* viene spostato in System. Data. Entity. Core. \*.</span><span class="sxs-lookup"><span data-stu-id="7a675-139">The general rule for namespace changes is that any type in System.Data.\* is moved to System.Data.Entity.Core.\*.</span></span> <span data-ttu-id="7a675-140">In altre parole, è sufficiente inserire **Entity. Core.**</span><span class="sxs-lookup"><span data-stu-id="7a675-140">In other words, just insert **Entity.Core.**</span></span> <span data-ttu-id="7a675-141">Dopo System. Data.</span><span class="sxs-lookup"><span data-stu-id="7a675-141">after System.Data.</span></span> <span data-ttu-id="7a675-142">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="7a675-142">For example:</span></span>

- <span data-ttu-id="7a675-143">System. Data. EntityException => System. Data. **Entity. Core**. EntityException</span><span class="sxs-lookup"><span data-stu-id="7a675-143">System.Data.EntityException => System.Data.**Entity.Core**.EntityException</span></span>  
- <span data-ttu-id="7a675-144">System. Data. Objects. ObjectContext => System. Data. **Entity. Core**. Objects. ObjectContext</span><span class="sxs-lookup"><span data-stu-id="7a675-144">System.Data.Objects.ObjectContext => System.Data.**Entity.Core**.Objects.ObjectContext</span></span>  
- <span data-ttu-id="7a675-145">System. Data. Objects. dataclasss. RelationshipManager => System. Data. **Entity. Core**. Objects. dataclasss. RelationshipManager</span><span class="sxs-lookup"><span data-stu-id="7a675-145">System.Data.Objects.DataClasses.RelationshipManager => System.Data.**Entity.Core**.Objects.DataClasses.RelationshipManager</span></span>  

<span data-ttu-id="7a675-146">Questi tipi sono inclusi negli spazi dei nomi *principali* perché non vengono utilizzati direttamente per la maggior parte delle applicazioni basate su DbContext.</span><span class="sxs-lookup"><span data-stu-id="7a675-146">These types are in the *Core* namespaces because they are not used directly for most DbContext-based applications.</span></span> <span data-ttu-id="7a675-147">Alcuni tipi che facevano parte di System.Data.Entity.dll vengono comunque usati in modo comune e diretto per le applicazioni basate su DbContext, quindi non sono stati spostati negli spazi dei nomi di *base* .</span><span class="sxs-lookup"><span data-stu-id="7a675-147">Some types that were part of System.Data.Entity.dll are still used commonly and directly for DbContext-based applications and so have not been moved into the *Core* namespaces.</span></span> <span data-ttu-id="7a675-148">Si tratta di:</span><span class="sxs-lookup"><span data-stu-id="7a675-148">These are:</span></span>

- <span data-ttu-id="7a675-149">System. Data. EntityState => System. Data. **Entità**. EntityState</span><span class="sxs-lookup"><span data-stu-id="7a675-149">System.Data.EntityState => System.Data.**Entity**.EntityState</span></span>  
- <span data-ttu-id="7a675-150">System. Data. Objects. dataclasss. EdmFunctionAttribute => System. Data. **Entity. DbFunctionAttribute**</span><span class="sxs-lookup"><span data-stu-id="7a675-150">System.Data.Objects.DataClasses.EdmFunctionAttribute => System.Data.**Entity.DbFunctionAttribute**</span></span>  
  > [!NOTE]
  > <span data-ttu-id="7a675-151">Questa classe è stata rinominata. una classe con il nome precedente esiste ancora e funziona, ma ora è contrassegnata come obsoleta.</span><span class="sxs-lookup"><span data-stu-id="7a675-151">This class has been renamed; a class with the old name still exists and works, but it now marked as obsolete.</span></span>  
- <span data-ttu-id="7a675-152">System. Data. Objects. EntityFunctions => System. Data. **Entity. DbFunctions**</span><span class="sxs-lookup"><span data-stu-id="7a675-152">System.Data.Objects.EntityFunctions => System.Data.**Entity.DbFunctions**</span></span>  
  > [!NOTE]
  > <span data-ttu-id="7a675-153">Questa classe è stata rinominata. una classe con il nome precedente esiste ancora e funziona, ma è ora contrassegnata come obsoleta.</span><span class="sxs-lookup"><span data-stu-id="7a675-153">This class has been renamed; a class with the old name still exists and works, but it now marked as obsolete.)</span></span>  
- <span data-ttu-id="7a675-154">Le classi spaziali (ad esempio, DbGeography, DbGeometry) sono state spostate da System. Data. Spatial => System. Data. **Entità**. Spaziali</span><span class="sxs-lookup"><span data-stu-id="7a675-154">Spatial classes (for example, DbGeography, DbGeometry) have moved from System.Data.Spatial => System.Data.**Entity**.Spatial</span></span>

> [!NOTE]
> <span data-ttu-id="7a675-155">Alcuni tipi nello spazio dei nomi System. Data sono System.Data.dll che non è un assembly EF.</span><span class="sxs-lookup"><span data-stu-id="7a675-155">Some types in the System.Data namespace are in System.Data.dll which is not an EF assembly.</span></span> <span data-ttu-id="7a675-156">Questi tipi non sono stati spostati, quindi gli spazi dei nomi rimangono invariati.</span><span class="sxs-lookup"><span data-stu-id="7a675-156">These types have not moved and so their namespaces remain unchanged.</span></span>
